<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>

    <style>
      /* thu nhỏ chữ tên trong khung thông tin */
      .name span {
        font-size: 20px; /* giữ nguyên */
        font-weight: 600;
        letter-spacing: 0.2px;
      }
      @media (max-width: 520px) {
        .name span {
          font-size: 12px;
        }
      }

      /* ICÔN: thu nhỏ nhẹ để nhường chỗ cho chữ */
      #heart__letter {
        width: 140px;
        max-width: 45%;
        height: auto;
        display: block;
        margin: 0 auto 8px;
      }
      .heart {
        width: 14px !important;
        height: auto !important;
      }

      /* BỨC THƯ: tăng kích thước chữ, line-height, và giới hạn chiều rộng để không tràn */
      .title__letter {
        font-size: 30px; /* lớn tiêu đề */
        line-height: 1.15;
        letter-spacing: 0.4px;
        font-weight: 800;
        text-align: center;
        margin-bottom: 12px;
      }
      .text__letter p {
        font-size: 22px; /* lớn nội dung */
        line-height: 1.9;
        color: #333;
        margin: 0;
        white-space: pre-wrap;
        word-wrap: break-word;
        overflow-wrap: break-word;
        max-width: 680px; /* giới hạn để xuống hàng hợp lý */
        margin-left: auto;
        margin-right: auto;
        padding: 6px 2px;
      }

      /* Tăng padding khung thư để chữ không dính mép và cho khung có scroll nếu cần */
      .letter {
        padding: 22px;
      }
      .letter__border {
        padding: 14px;
        max-height: 72vh;
        overflow: auto;
      }

      /* Điều chỉnh bố cục nhỏ: giảm cỡ chữ khi màn hình nhỏ */
      @media (max-width: 900px) {
        .title__letter {
          font-size: 26px;
        }
        .text__letter p {
          font-size: 20px;
          max-width: 520px;
        }
        #heart__letter {
          width: 125px;
        }
      }
      @media (max-width: 520px) {
        .title__letter {
          font-size: 20px;
        }
        .text__letter p {
          font-size: 16px;
          line-height: 1.6;
          max-width: 320px;
        }
        #heart__letter {
          width: 110px;
        }
      }
      /* Khung nội dung bên trong */
      .letter {
        background: transparent;
        padding: 0;
      }

      /* Tiêu đề có dòng kẻ dài theo khung */
      .title__letter {
        font-size: 30px;
        line-height: 1.15;
        letter-spacing: 0.4px;
        font-weight: 800;
        text-align: center;
        margin: 0 0 12px 0;
        position: relative;
        padding-bottom: 12px;
      }
      /* Dòng kẻ nằm ngay dưới tiêu đề, dài 100% khung vàng */
      .title__letter::after {
        content: "";
        display: block;
        height: 6px; /* độ dày dòng */
        background: linear-gradient(90deg, #ffd54f, #ffd13a);
        width: 100%;
        border-radius: 4px;
        margin-top: 6px;
      }

      /* Nếu muốn một dòng mảnh khác (ví dụ dưới ngày), style .date__of__birth */
      .date__of__birth {
        text-align: center;
        padding: 10px 0;
        width: 100%;
        box-sizing: border-box;
      }
      .date__of__birth span {
        display: inline-block;
        padding: 6px 16px;
        background: rgba(255, 213, 79, 0.12);
        border-radius: 20px;
        font-weight: 600;
      }
      /* thêm 1 đường mảnh ngang trải đều khung dưới ngày (nếu cần) */
      .date__of__birth::after {
        content: "";
        display: block;
        height: 2px;
        background: #ffdf80;
        width: 100%;
        margin-top: 10px;
        border-radius: 2px;
      }

      /* Mở rộng nền vàng cho khung thư và làm rõ hơn */
      .box__letter {
        width: 100%;
        padding: 12px;
        box-sizing: border-box;
      }
      .letter__border {
        background: linear-gradient(
          180deg,
          #fff9e6 0%,
          #fff5d0 100%
        ); /* nền vàng nhẹ */
        padding: 28px;
        border-radius: 14px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
        width: 100%;
        box-sizing: border-box;
      }

      /* Nội dung thư bố cục 2 cột, có đường kẻ dọc kéo dài theo chiều cao nội dung */
      .content__letter {
        display: flex;
        gap: 28px;
        align-items: flex-start;
        position: relative;
        padding: 8px 0;
        box-sizing: border-box;
      }

      /* Nếu muốn đường mảnh thay vì dày, đổi width: 1px và background rgba(0,0,0,0.06) */
      /* Responsive: ẩn đường dọc trên màn nhỏ */
      @media (max-width: 680px) {
        .content__letter::before {
          display: none;
        }
      }

      /* cột trái/ phải tỉ lệ, đảm bảo chữ nằm trong khung */
      .content__letter .left {
        width: 42%;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-right: 8px;
        box-sizing: border-box;
      }
      .content__letter .right {
        width: 58%;
        padding-left: 8px;
        box-sizing: border-box;
        border-left: none !important;
      }

      /* tiết chế kích thước ảnh/ikon bên trái để không vượt khung */
      #heart__letter {
        max-width: 100%;
        width: 140px;
        height: auto;
        display: block;
        margin: 0 auto;
      }

      /* responsive: chuyển thành cột trên màn hình nhỏ và ẩn đường dọc */
      @media (max-width: 900px) {
        .content__letter {
          gap: 16px;
        }
        .content__letter::before {
          left: 50%;
        }
      }
      @media (max-width: 680px) {
        .content__letter {
          flex-direction: column;
        }
        .content__letter::before {
          display: none;
        }
        .content__letter .left,
        .content__letter .right {
          width: 100%;
          padding: 0;
        }
      }

      /* đảm bảo tiêu đề và thanh vàng dưới tiêu đề kéo dài theo khung */
      .title__letter::after {
        width: 100%;
        background: linear-gradient(90deg, #ffd54f, #ffd13a);
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <div class="flag__birthday">
        <img src="./images/1.png" alt="" width="350" class="flag__left" />
        <img src="./images/1.png" alt="" width="350" class="flag__right" />
      </div>
      <div class="content">
        <div class="left">
          <div class="title">
            <h1 class="happy">
              <span style="--t: 4s">H</span>
              <span style="--t: 4.2s">a</span>
              <span style="--t: 4.4s">p</span>
              <span style="--t: 4.6s">p</span>
              <span style="--t: 4.8s">y</span>
            </h1>
            <h1 class="birthday">
              <span style="--t: 5s">B</span>
              <span style="--t: 5.2s">i</span>
              <span style="--t: 5.4s">r</span>
              <span style="--t: 5.6s">t</span>
              <span style="--t: 5.8s">h</span>
              <span style="--t: 6s">d</span>
              <span style="--t: 6.2s">a</span>
              <span style="--t: 6.4s">y</span>
            </h1>
            <div class="hat">
              <img src="./images/hat.png" alt="" width="130" />
            </div>
          </div>
          <div class="date__of__birth">
            <span></span>
          </div>
          <div class="btn">
            <button id="btn__letter">
              Ấn vào đây nè Bbii
              <i class="fa-regular fa-envelope"></i>
            </button>
          </div>
        </div>
        <div class="right">
          <div class="box__account">
            <div class="image">
              <img src="./images/2.jpg" alt="" />
            </div>
            <div class="name">
              <i class="fa-solid fa-heart"></i>
              <span>Đinh Phùng Ngọc Chi</span>
              <i class="fa-solid fa-heart"></i>
            </div>
            <div class="balloon_one">
              <img width="100px" src="./images/balloon1.png" alt="" />
            </div>
            <div class="balloon_two">
              <img width="100px" src="./images/balloon2.png" alt="" />
            </div>
          </div>
          <div class="cricle">
            <div class="text__cricle">
              <span style="--i: 1">h</span>
              <span style="--i: 2">a</span>
              <span style="--i: 3">p</span>
              <span style="--i: 4">p</span>
              <span style="--i: 5">y</span>
              <span style="--i: 6">-</span>
              <span style="--i: 7">b</span>
              <span style="--i: 8">i</span>
              <span style="--i: 9">r</span>
              <span style="--i: 10">t</span>
              <span style="--i: 11">h</span>
              <span style="--i: 12">d</span>
              <span style="--i: 13">a</span>
              <span style="--i: 14">y</span>
              <span style="--i: 15">-</span>
            </div>
            <i class="fa-solid fa-heart"></i>
          </div>
        </div>
      </div>
      <div class="decorate_star star1" style="--t: 15s"></div>
      <div class="decorate_star star2" style="--t: 15.2s"></div>
      <div class="decorate_star star3" style="--t: 15.4s"></div>
      <div class="decorate_star star4" style="--t: 15.6s"></div>
      <div class="decorate_star star5" style="--t: 15.8s"></div>
      <div class="decorate_flower--one" style="--t: 15s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--two" style="--t: 15.3s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--three" style="--t: 15.6s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_bottom">
        <img src="./images/decorate.png" alt="" width="100" />
      </div>
      <div class="smiley__icon">
        <img src="./images/smiley_icon.png" alt="" width="100" />
      </div>

      <div class="box__letter">
        <div class="letter__border">
          <div class="letter">
            <div class="title__letter"></div>
            <div class="content__letter">
              <div class="left">
                <img
                  id="heart__letter"
                  src="https://media.giphy.com/media/YKUvclrGYmDKXwtphf/giphy.gif"
                  alt=""
                />
                <img
                  class="heart heart_1"
                  style="--t: 0.2s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_2"
                  style="--t: 0.4s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_3"
                  style="--t: 0.6s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_4"
                  style="--t: 0.8s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
              </div>
              <div class="right">
                <div class="love__img">
                  <img
                    src="https://media.giphy.com/media/m85llaN7ZkFIHtURiC/giphy.gif"
                    alt=""
                    width="220"
                  />
                </div>
                <div class="text__letter">
                  <p></p>
                </div>
                <img id="mewmew" width="80" src="./images/mewmew.gif" alt="" />
              </div>
            </div>
          </div>
          <div class="close">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    // đổi ngày thành 24/11/2008
    let datetxt = "24/11/2008";
    let datatxtletter = `Chúc mừng sinh nhật Shin – người con gái đặc biệt.
Cảm ơn Shin vì đã xuất hiện, vì đã luôn dễ thương, tử tế và mang đến cảm giác bình yên.
Mong tuổi mới của Shin sẽ thật nhẹ nhàng, thật vui, và luôn được bao quanh bởi những điều Shin xứng đáng có: hạnh phúc, yêu thương và sự mạnh mẽ để vượt qua mọi áp lực.
Chúc Shin luôn mỉm cười rạng rỡ, luôn mạnh mẽ theo cách của riêng mình… và Shin yên tâm rằng : chỉ cần Shin nói "Shin khong sai" thì cho dù trời có sập thì Joon vẫn bảo vệ Shin tới cùng.
Happy Birthday, Shin`;
    let titleLetter = "Gửi Shin";
    let charArrDate = datetxt.split("");
    let charArrDateLetter = datatxtletter.split("");
    let charArrTitle = titleLetter.split("");
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");
    setTimeout(function () {
      timeDatetxt = setInterval(function () {
        if (currentIndex < charArrDate.length) {
          date__of__birth.textContent += charArrDate[currentIndex];
          currentIndex++;
        } else {
          let i = document.createElement("i");
          i.className = "fa-solid fa-star";
          document.querySelector(".date__of__birth").prepend(i);
          document
            .querySelector(".date__of__birth")
            .appendChild(i.cloneNode(true));
          clearInterval(timeDatetxt);
        }
      }, 100);
    }, 12000);

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function () {
      $(".box__letter").slideDown();
      setTimeout(function () {
        $(".letter__border").slideDown();
      }, 1000);
      setTimeout(function () {
        intervalTitle = setInterval(function () {
          if (currentIndexTitle < charArrTitle.length) {
            document.querySelector(".title__letter").textContent +=
              charArrTitle[currentIndexTitle];
            let i = document.createElement("i");
            i.className = "fa-solid fa-heart";
            document.querySelector(".title__letter").appendChild(i);
            currentIndexTitle++;
          } else {
            clearInterval(intervalTitle);
          }
        }, 100);
      }, 2000);
      setTimeout(function () {
        document.querySelector("#heart__letter").classList.add("animationOp");
        document.querySelector(".love__img").classList.add("animationOp");
        document.querySelector("#mewmew").classList.add("animationOp");
      }, 2800);
      setTimeout(function () {
        document.querySelectorAll(".heart").forEach((item) => {
          item.classList.add("animation");
        });
      }, 3500);
      setTimeout(function () {
        intervalContent = setInterval(function () {
          if (currentIndexLetter < charArrDateLetter.length) {
            text__letter.textContent += charArrDateLetter[currentIndexLetter];
            currentIndexLetter++;
          } else {
            clearInterval(intervalContent);
          }
        }, 50);
      }, 6000);
    });
    $(".close").on("click", function () {
      clearInterval(intervalContent);
      document.querySelector(".title__letter").textContent = "";
      text__letter.textContent = "";
      currentIndexLetter = 0;
      currentIndexTitle = 0;
      document.querySelector("#heart__letter").classList.remove("animationOp");
      document.querySelector(".love__img").classList.remove("animationOp");
      document.querySelector("#mewmew").classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item) => {
        item.classList.remove("animation");
      });
      $(".box__letter").slideUp();
      $(".letter__border").slideUp();
    });
  </script>
</html>
